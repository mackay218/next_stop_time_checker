(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,o){e.exports=o(46)},22:function(e,t,o){},24:function(e,t,o){},46:function(e,t,o){"use strict";o.r(t);var n=o(0),a=o.n(n),r=o(11),i=o.n(r),l=(o(22),o(12)),c=o(13),s=o(15),u=o(14),p=o(16),d=(o(24),o(2)),g=o.n(d),h=o(4),D=o.n(h),m=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(s.a)(this,Object(u.a)(t).call(this,e))).clearOptions=function(e){console.log("in clearOptions",e);var t=document.getElementById(e),o=t.getElementsByTagName("option");if(o.length>1){for(var n=o.length-1;n>=0;n--)t.remove(o[n]);var a=document.createElement("option"),r=e.split("D")[0];a.innerHTML="Choose ".concat(r),a.selected=!0,a.disabled=!0,t.appendChild(a)}},o.populateDropDown=function(e,t,o,n){console.log("in populateDropDown",e,t,o,n);var a=document.getElementById(e);t.length>0&&t.forEach(function(e){var t=document.createElement("option");t.innerHTML=e[n],t.value=e[o],a.appendChild(t)})},o.getTodaysRoutes=function(){console.log("in getTodaysRoutes"),document.getElementById("directionDropDown").disabled=!0,document.getElementById("stopDropDown").disabled=!0,g.a.get("/api/nextStopRouter").then(function(e){console.log(e.data),o.setState({routes:e.data}),o.populateRouteDropDown()}).catch(function(e){console.log("error getting todays routes",e),alert("error getting todays routes",e)})},o.populateRouteDropDown=function(){var e=o.state.routes;console.log("in populateRouteDropDown",e),o.populateDropDown("routeDropDown",e,"Route","Description")},o.handleRouteChange=function(e){console.log("in handleRouteChange",e.target.value);var t=e.target.value;o.setState({chosenRoute:t}),o.getDirections(t)},o.getDirections=function(e){console.log("in getDirections"),g.a.get("/api/nextStopRouter/directions/".concat(e)).then(function(e){console.log(e.data),o.setState({directions:e.data}),o.getStops(),o.populateDirectionDropDown()}).catch(function(e){console.log("error getting directions for route",e),alert("error getting directions for route",e)})},o.getStops=function(){var e=o.state.chosenRoute,t=o.state.directions[0].Value;console.log("in getStops",e,t),g.a.get("/api/nextStopRouter/stops/".concat(e,"/").concat(t)).then(function(e){console.log(e.data),o.setState({stops:e.data}),o.populateStopDropDown()}).catch(function(e){console.log("error getting stops for route and direction",e),alert("error getting stops for route and direction",e)})},o.populateDirectionDropDown=function(){var e=o.state.directions;console.log("in populateDirectionDropDown",e);var t=document.getElementById("directionDropDown");o.clearOptions("directionDropDown"),o.populateDropDown("directionDropDown",e,"Value","Text"),t.disabled=!1},o.handleDirectionChange=function(e){console.log("in handleDirectionChange",e.target.value);var t=e.target.value;o.setState({chosenDirection:t})},o.populateStopDropDown=function(){var e=o.state.stops;console.log("in populateStopDropDown",e),o.clearOptions("stopDropDown"),o.populateDropDown("stopDropDown",e,"Value","Text"),document.getElementById("stopDropDown").disabled=!1},o.handleStopChange=function(e){console.log("in handleStopChange",e.target.value);var t=e.target.value;o.setState({chosenStop:t})},o.handleSubmit=function(e){e.preventDefault(),console.log("in handleSubmit",o.state);var t=o.state.chosenRoute,n=o.state.chosenDirection,a=o.state.chosenStop;g.a.get("/api/nextStopRouter/time/".concat(t,"/").concat(n,"/").concat(a)).then(function(e){console.log(e.data),o.handleResponse(e.data)}).catch(function(e){console.log("error getting time until next bus/train",e),alert("error getting time until next bus/train",e)})},o.handleResponse=function(e){console.log("in handleResponse");var t=document.getElementById("nextTime");if(t.innerHTML="",0===e.length)console.log("No bus or Train coming"),t.innerHTML="No bus or train coming";else if(e.length>0){var o,n=e[0];n.Actual?("Due"===n.DepartureText?(console.log("Any minute"),o="Any minute"):o=n.DepartureText.replace("Min","minutes"),t.innerHTML=o):(D.a.relativeTimeThreshold("m",60),o=(o=D()(n.DepartureTime).fromNow()).substring(3,o.length),t.innerHTML=o)}},o.state={routes:"",stops:"",directions:"",chosenRoute:"",chosenStop:"",chosenDirection:"",time:""},o}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getTodaysRoutes()}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",null,"Next Stop Time Checker")),a.a.createElement("div",{className:"form-container"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("label",{htmlFor:"#routeDropDown"},"Routes"),a.a.createElement("select",{defaultValue:"choose",id:"routeDropDown",onChange:this.handleRouteChange},a.a.createElement("option",{disabled:!0,value:"choose"},"Choose route")),a.a.createElement("label",{htmlFor:"#stopDropDown"},"Stops"),a.a.createElement("select",{defaultValue:"choose",id:"stopDropDown",onChange:this.handleStopChange},a.a.createElement("option",{disabled:!0,value:"choose"},"Choose stop")),a.a.createElement("label",{htmlFor:"#directionDropDown"},"Direction"),a.a.createElement("select",{defaultValue:"choose",id:"directionDropDown",onChange:this.handleDirectionChange},a.a.createElement("option",{disabled:!0,value:"choose"},"Choose direction")),a.a.createElement("button",null,"Submit"))),a.a.createElement("div",{className:"resultContainer"},a.a.createElement("h3",null,"Next Bus/Train: ",a.a.createElement("p",{id:"nextTime"}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(m,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.6cf26a64.chunk.js.map